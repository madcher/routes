(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{10:function(t,e,n){"use strict";n.r(e);var o=n(1),s=n.n(o),a=n(4),i=n.n(a),c=n(2),r=n(0),l=function(t){var e=t.setToken;return Object(r.jsxs)("div",{className:"header",children:[Object(r.jsx)("div",{className:"header__label",children:"Route Tracker"}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{className:"header__logout",onClick:function(){return e(!1)},children:"Log out"})})]})},u=function(){return Object(o.useEffect)((function(){var t=window.L,e=t.map("mapid").setView([55.755826,37.6173],13);t.tileLayer("https://cartodb-basemaps-{s}.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png",{attribution:"mymap"}).addTo(e),t.Routing.control({addWaypoints:!1,draggableWaypoints:!1,fitSelectedRoutes:!1,collapsible:!1,show:!1,waypoints:[t.latLng(55.755826,37.6173),t.latLng(55.855826,37.8173),t.latLng(55.955826,37.9179)]}).addTo(e)}),[]),Object(r.jsx)("div",{id:"mapid"})};var d=function(t,e,n){fetch("/api/addpoint",{method:"POST",headers:{token:n,"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(t)}).then((function(t){!function(t,e){fetch("/api/get-courses",{method:"GET",headers:{token:e}}).then((function(t){return t.json()})).then((function(e){t(e)})).catch((function(t){return console.log(t)}))}(e,n)})).catch((function(t){return console.log(t)}))},h=new Blob([("("+function(){this.onmessage=function(t){t.data;var e=new WebSocket("ws://localhost:8888");e.onopen=function(){postMessage({hint:"\u0421\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043e"})},e.onclose=function(t){t.wasClean?postMessage({hint:"\u0421\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u0437\u0430\u043a\u0440\u044b\u0442\u043e \u0447\u0438\u0441\u0442\u043e"}):postMessage({hint:"\u041e\u0431\u0440\u044b\u0432 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f"}),postMessage({hint:"\u041a\u043e\u0434: "+t.code+" \u043f\u0440\u0438\u0447\u0438\u043d\u0430: "+t.reason})},e.onmessage=function(t){postMessage({message:t.data})},e.onerror=function(t){postMessage({error:"\u041e\u0448\u0438\u0431\u043a\u0430 "+t.message})}}}+")();").replace('"use strict";',"")]),j=(window.URL?window.URL:window.webkitURL).createObjectURL(h,{type:"application/javascript; charset=utf-8"}),p=function(t){var e=t.token;Object(o.useEffect)((function(){var t=new Worker(j);t.postMessage({addThis:{num1:1,num2:10}}),t.onmessage=function(t){var e=t.data,n=e.error,o=e.hint,s=e.message;if(n&&alert(n),o&&console.log(o),s)if(console.log(s),"granted"===Notification.permission)new Notification(s);else"denied"!==Notification.permission&&Notification.requestPermission((function(t){if("granted"===t)new Notification(s)}))}}),[]);var n=function(){console.log("set points")};return Object(r.jsxs)("div",{className:"content",children:[Object(r.jsxs)("div",{className:"map-menu",children:[Object(r.jsx)("div",{children:"New point"}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{type:"button",className:"auth__input auth_button",onClick:function(){d({lat:56.855826,lng:38.8173,carId:1},n,e)},children:"Add point"})})]}),Object(r.jsxs)("div",{className:"center-menu",children:[Object(r.jsx)("div",{children:"Go to center"}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{type:"button",className:"auth__input auth_button",onClick:function(){},children:"go"})})]}),Object(r.jsx)(u,{})]})},b=function(t){var e=t.setToken,n=Object(o.useState)(!1),s=Object(c.a)(n,2),a=s[0],i=s[1];return Object(r.jsx)("div",{className:"auth__container",children:Object(r.jsxs)("form",{className:"auth__form",onSubmit:function(t){t.preventDefault(),function(t,e,n){var o=new FormData(t.target),s=o.get("login"),a=o.get("password");console.log(s,a),fetch("/api/authorization",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({login:s,password:a})}).then((function(t){if(!t.ok)throw console.log("HTTP status "+t.status),Error;return t.json()})).then((function(t){e(t.token),n(!1)})).catch((function(t){n(!0),console.log(t)}))}(t,e,i)},children:[Object(r.jsx)("label",{className:"auth__label",children:"Login"}),Object(r.jsx)("input",{className:"auth__input",type:"text",placeholder:"login",name:"login"}),Object(r.jsx)("label",{className:"auth__label",children:"Password"}),Object(r.jsx)("input",{className:"auth__input",type:"password",placeholder:"",name:"password"}),a&&Object(r.jsx)("div",{className:"auth_error",children:"Invalid login or password"}),Object(r.jsx)("button",{type:"submit",className:"auth__input auth_button",children:"Submit"})]})})},f=function(){var t=Object(o.useState)(null),e=Object(c.a)(t,2),n=e[0],s=e[1];return n?Object(r.jsxs)("div",{children:[Object(r.jsx)(l,{setToken:s}),Object(r.jsx)(p,{token:n})]}):Object(r.jsx)(b,{setToken:s})};i.a.render(Object(r.jsx)(s.a.StrictMode,{children:Object(r.jsx)(f,{})}),document.getElementById("root"))}},[[10,1,2]]]);
//# sourceMappingURL=main.9d9012a9.chunk.js.map