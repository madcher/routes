(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{10:function(e,t,n){"use strict";n.r(t);var s=n(1),a=n.n(s),o=n(4),i=n.n(o),c=n(2),r=n(0),l=function(e){var t=e.setToken;return Object(r.jsxs)("div",{className:"header",children:[Object(r.jsx)("div",{className:"header__label",children:"Route Tracker"}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{className:"header__logout",onClick:function(){return t(!1)},children:"Log out"})})]})},u=function(){return Object(s.useEffect)((function(){var e=window.L,t=e.map("mapid").setView([55.755826,37.6173],13);e.tileLayer("https://cartodb-basemaps-{s}.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png",{attribution:"mymap"}).addTo(t),e.Routing.control({addWaypoints:!1,draggableWaypoints:!1,fitSelectedRoutes:!1,collapsible:!1,show:!1,waypoints:[e.latLng(55.755826,37.6173),e.latLng(55.855826,37.8173),e.latLng(55.955826,37.9179)]}).addTo(t)}),[]),Object(r.jsx)("div",{id:"mapid"})};var d=new Blob([("("+function(){this.onmessage=function(e){e.data;var t=new WebSocket("ws://localhost:8888");t.onopen=function(){postMessage({hint:"\u0421\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043e"})},t.onclose=function(e){e.wasClean?postMessage({hint:"\u0421\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u0437\u0430\u043a\u0440\u044b\u0442\u043e \u0447\u0438\u0441\u0442\u043e"}):postMessage({hint:"\u041e\u0431\u0440\u044b\u0432 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f"}),postMessage({hint:"\u041a\u043e\u0434: "+e.code+" \u043f\u0440\u0438\u0447\u0438\u043d\u0430: "+e.reason})},t.onmessage=function(e){postMessage({message:e.data})},t.onerror=function(e){postMessage({error:"\u041e\u0448\u0438\u0431\u043a\u0430 "+e.message})}}}+")();").replace('"use strict";',"")]),j=(window.URL?window.URL:window.webkitURL).createObjectURL(d,{type:"application/javascript; charset=utf-8"}),b=function(){return Object(s.useEffect)((function(){var e=new Worker(j);e.postMessage({addThis:{num1:1,num2:10}}),e.onmessage=function(e){var t=e.data,n=t.error,s=t.hint,a=t.message;if(n&&alert(n),s&&console.log(s),a)if(console.log(a),"granted"===Notification.permission)new Notification(a);else"denied"!==Notification.permission&&Notification.requestPermission((function(e){if("granted"===e)new Notification(a)}))}}),[]),Object(r.jsxs)("div",{className:"content",children:[Object(r.jsxs)("div",{className:"map-menu",children:[Object(r.jsx)("div",{children:"New point"}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{type:"button",className:"auth__input auth_button",onClick:function(){},children:"Add point"})})]}),Object(r.jsxs)("div",{className:"center-menu",children:[Object(r.jsx)("div",{children:"Go to center"}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{type:"button",className:"auth__input auth_button",onClick:function(){},children:"go"})})]}),Object(r.jsx)(u,{})]})},h=function(e){var t=e.setToken,n=Object(s.useState)(!1),a=Object(c.a)(n,2),o=a[0],i=a[1];return Object(r.jsx)("div",{className:"auth__container",children:Object(r.jsxs)("form",{className:"auth__form",onSubmit:function(e){e.preventDefault(),function(e,t,n){var s=new FormData(e.target),a=s.get("login"),o=s.get("password");console.log(a,o),fetch("/api/authorization",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({login:a,password:o})}).then((function(e){if(!e.ok)throw console.log("HTTP status "+e.status),Error;return e.json()})).then((function(e){t(e.token),n(!1)})).catch((function(e){n(!0),console.log(e)}))}(e,t,i)},children:[Object(r.jsx)("label",{className:"auth__label",children:"Login"}),Object(r.jsx)("input",{className:"auth__input",type:"text",placeholder:"login",name:"login"}),Object(r.jsx)("label",{className:"auth__label",children:"Password"}),Object(r.jsx)("input",{className:"auth__input",type:"password",placeholder:"",name:"password"}),o&&Object(r.jsx)("div",{className:"auth_error",children:"Invalid login or password"}),Object(r.jsx)("button",{type:"submit",className:"auth__input auth_button",children:"Submit"})]})})},p=function(){var e=Object(s.useState)(null),t=Object(c.a)(e,2),n=t[0],a=t[1];return n?Object(r.jsxs)("div",{children:[Object(r.jsx)(l,{setToken:a}),Object(r.jsx)(b,{token:n})]}):Object(r.jsx)(h,{setToken:a})};i.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(p,{})}),document.getElementById("root"))}},[[10,1,2]]]);
//# sourceMappingURL=main.1dc5e02c.chunk.js.map